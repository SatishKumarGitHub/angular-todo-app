<div class="container-fluid">

  <h2 class="text-primary">Reactive Registraion Form </h2>

  <form [formGroup]="reactiveRegistraion" (ngSubmit)="onSubmit()" >

    <!-- {{reactiveRegistraion.value | json}} -->
    <div class="form-group">
      <label>Username</label>
      <input formControlName="username" type="text" class="form-control" [class.is-invalid]="username.touched &&
        username.invalid">

      <!-- <small class="text-danger"
        [class.d-none] = "username.valid||
         username.untouched">Username is required</small> -->

      <div *ngIf="username.invalid && username.touched">
        <small *ngIf="username.errors['required']" class="text-danger">Username is required</small>
        <small *ngIf="username.errors['minlength']" class="text-danger">Username must be at least 3 characters</small>
        <small *ngIf="username.errors['forbiddenUsername']"
          class="text-danger">{{username.errors['forbiddenUsername'].value}} username not allowed </small>
      </div>
    </div>

    <div class="form-group">
      <label>Email</label>
      <input type="email" class="form-control" [class.is-invalid] ="email.invalid" formControlName ="email">
      <small class="text-danger" [class.d-none] = "email.valid">Email is required</small>
    </div>

    <div class="form-group">
      <label>Password</label>
      <input formControlName="password" type="password" class="form-control">
    </div>
    <div class="form-group">
      <label>Confirm password</label>
      <input formControlName="confirmPassword" [class.is-invalid] ="reactiveRegistraion.errors?.misMatch" type="password" class="form-control">
   <small class="text-danger" *ngIf="reactiveRegistraion.errors?.misMatch">Passwords do not match</small>

    </div>

    <div formGroupName="address">

      <div class="form-group">
        <label>City</label>
        <input type="text" formControlName="city" class="form-control">
      </div>

      <div class="form-group">
        <label>Sate</label>
        <input type="text" formControlName="state" class="form-control">
      </div>

      <div class="form-group">
        <label>Postal Code</label>
        <input type="text" formControlName="postalCode" class="form-control">
      </div>
    </div>

    <div class="mb-3">
    <div class="form-check">
      <input type="checkbox" class="form-check-input" formControlName ="subscribe">
      <label class="form-check-label">send me the promotional offers</label>
    </div> </div>

    <button type="submit" class="btn btn-primary" [disabled] ="reactiveRegistraion.invalid">Register</button>
    <button type="submit" (click)="onLoadApiData()" class="btn btn-secondary ml-3">Load API Data</button>

  </form>



</div>
